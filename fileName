-- H2 2.3.232;
;             
CREATE USER IF NOT EXISTS "SA" SALT '5aa6e91f3691d22b' HASH 'a7fe40b93aea6ddf5c59ddc63263b530b71ca43d8503b5356b2bcfccbc310946' ADMIN;         
CREATE SEQUENCE "PUBLIC"."SEQUENCE_GENERATOR" START WITH 1 INCREMENT BY 50;   
CREATE GLOBAL TEMPORARY TABLE "PUBLIC"."HTE_LOAN_INSTALLMENT"(
    "DUE_DATE" DATE,
    "IS_PAID" BOOLEAN,
    "PAYMENT_DATE" DATE,
    "RN_" INTEGER NOT NULL,
    "AMOUNT" FLOAT(53),
    "ID" BIGINT,
    "LOAN_ID" BIGINT,
    "PAID_AMOUNT" FLOAT(53)
);        
ALTER TABLE "PUBLIC"."HTE_LOAN_INSTALLMENT" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_1" PRIMARY KEY("RN_");        
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.HTE_LOAN_INSTALLMENT;    
CREATE MEMORY TABLE "PUBLIC"."CUSTOMER"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
    "CREDIT_LIMIT" FLOAT(53) NOT NULL,
    "NAME" CHARACTER VARYING(255),
    "SURNAME" CHARACTER VARYING(255),
    "USED_CREDIT_LIMIT" FLOAT(53) NOT NULL
);         
ALTER TABLE "PUBLIC"."CUSTOMER" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_5" PRIMARY KEY("ID");     
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.CUSTOMER;
CREATE MEMORY TABLE "PUBLIC"."LOAN"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
    "CREATE_DATE" DATE,
    "IS_PAID" BOOLEAN NOT NULL,
    "LOAN_AMOUNT" FLOAT(53) NOT NULL,
    "NUMBER_OF_INSTALLMENT" INTEGER NOT NULL,
    "CUSTOMER_ID" BIGINT NOT NULL
);         
ALTER TABLE "PUBLIC"."LOAN" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_2" PRIMARY KEY("ID");         
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.LOAN;    
CREATE MEMORY TABLE "PUBLIC"."LOAN_INSTALLMENT"(
    "ID" BIGINT NOT NULL,
    "AMOUNT" FLOAT(53) NOT NULL,
    "DUE_DATE" DATE,
    "IS_PAID" BOOLEAN NOT NULL,
    "PAID_AMOUNT" FLOAT(53) NOT NULL,
    "PAYMENT_DATE" DATE,
    "LOAN_ID" BIGINT NOT NULL
);      
ALTER TABLE "PUBLIC"."LOAN_INSTALLMENT" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_9" PRIMARY KEY("ID");             
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.LOAN_INSTALLMENT;        
ALTER TABLE "PUBLIC"."LOAN_INSTALLMENT" ADD CONSTRAINT "PUBLIC"."FKPII2HD44B4IH32USRB3LYCK2P" FOREIGN KEY("LOAN_ID") REFERENCES "PUBLIC"."LOAN"("ID") NOCHECK;
ALTER TABLE "PUBLIC"."LOAN" ADD CONSTRAINT "PUBLIC"."FKCWV05AGFQWG5NDY6ADBEFSX7D" FOREIGN KEY("CUSTOMER_ID") REFERENCES "PUBLIC"."CUSTOMER"("ID") NOCHECK;    
